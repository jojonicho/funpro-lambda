{
  "version": 3,
  "sources": ["../../../../../../Users/jonathannicholas/Desktop/sem5/pemfung/funpro-lambda/functions/schedule.ts"],
  "sourceRoot": "/var/folders/l_/kqvck5_n7h70tqhbdtl442pc0000gn/T/tmp-39439-ecU7TryYPXra",
  "sourcesContent": ["const MINUTES_IN_A_DAY = 60 * 24;\n// 11.40 -> 60*11 + 40\n// 19.00 -> 60*19\n\nconst findScheduleWithinOneHour = (schedules, timestamp) => {\n  const now = new Date(timestamp);\n  const minutes = now.getHours() * 60 + now.getMinutes();\n  const day = now.getDay();\n  const RANGE = 60; // 1 hour range\n\n  // key not in schedule\n  if (!schedules[day]) {\n    return [];\n  }\n\n  return schedules[day]\n    .filter((schedule) => Math.abs(schedule.time_in_minutes - minutes) <= RANGE)\n    .map((schedule) => {\n      return {\n        ...schedule,\n        starts_in_minutes: schedule.time_in_minutes - minutes,\n      };\n    });\n};\n\nexports.handler = async (event: any = {}): Promise<any> => {\n  // if not post, return exception\n  if (event.httpMethod !== \"POST\") {\n    return { statusCode: 405, body: \"Method Not Allowed\" };\n  }\n  // get post body\n  const body = JSON.parse(event.body);\n  const schedule = body.schedule;\n  const timestamp = body.timestamp;\n\n  return {\n    statusCode: 200,\n    body: JSON.stringify({\n      message: findScheduleWithinOneHour(schedule, timestamp),\n    }),\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Headers\": \"Origin, Content-Type, X-Auth-Token\",\n      \"Access-Control-Allow-Methods\": \"GET, POST, PUT, PATCH, DELETE, OPTION\",\n    },\n  };\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA,IAAM,mBAAmB,KAAK;AAI9B,IAAM,4BAA4B,CAAC,WAAW,cAAc;AAC1D,QAAM,MAAM,IAAI,KAAK;AACrB,QAAM,UAAU,IAAI,aAAa,KAAK,IAAI;AAC1C,QAAM,MAAM,IAAI;AAChB,QAAM,QAAQ;AAGd,MAAI,CAAC,UAAU,MAAM;AACnB,WAAO;AAAA;AAGT,SAAO,UAAU,KACd,OAAO,CAAC,aAAa,KAAK,IAAI,SAAS,kBAAkB,YAAY,OACrE,IAAI,CAAC,aAAa;AACjB,WAAO,iCACF,WADE;AAAA,MAEL,mBAAmB,SAAS,kBAAkB;AAAA;AAAA;AAAA;AAKtD,QAAQ,UAAU,OAAO,QAAa,OAAqB;AAEzD,MAAI,MAAM,eAAe,QAAQ;AAC/B,WAAO,EAAE,YAAY,KAAK,MAAM;AAAA;AAGlC,QAAM,OAAO,KAAK,MAAM,MAAM;AAC9B,QAAM,WAAW,KAAK;AACtB,QAAM,YAAY,KAAK;AAEvB,SAAO;AAAA,IACL,YAAY;AAAA,IACZ,MAAM,KAAK,UAAU;AAAA,MACnB,SAAS,0BAA0B,UAAU;AAAA;AAAA,IAE/C,SAAS;AAAA,MACP,+BAA+B;AAAA,MAC/B,gCAAgC;AAAA,MAChC,gCAAgC;AAAA;AAAA;AAAA;",
  "names": []
}
